<!DOCTYPE html>

<html>

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="X-UA-Compatible" content="ie=edge">

<title>Markmap</title>

<style>

* {

  margin: 0;

  padding: 0;

}

#mindmap {

  display: block;

  width: 100vw;

  height: 100vh;

}

</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css">

</head>

<body>

<svg id="mindmap"></svg>

<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:x,mm:K}=window,P=new x.Toolbar;P.attach(K);const F=P.render();F.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(F)})})()</script><script>((b,L,T,D)=>{const H=b();window.mm=H.Markmap.create("svg#mindmap",(L||H.deriveOptions)(D),T)})(()=>window.markmap,null,{"content":"CPU Utilization in SAP HANA","children":[{"content":"1. Inefficient Queries","children":[{"content":"<strong>Description</strong>: Poorly written or unoptimized SELECT statements (e.g., full table scans, complex joins)","children":[],"payload":{"tag":"li","lines":"10,11"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Optimize queries (use indexes, rewrite joins, avoid SELECT *)","children":[],"payload":{"tag":"li","lines":"12,13"}},{"content":"Use query hints (e.g., FORCE INDEX)","children":[],"payload":{"tag":"li","lines":"13,14"}},{"content":"Analyze execution plans","children":[],"payload":{"tag":"li","lines":"14,15"}}],"payload":{"tag":"li","lines":"11,15"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None typically required; focus on query tuning","children":[],"payload":{"tag":"li","lines":"16,17"}}],"payload":{"tag":"li","lines":"15,17"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_SQL_PLAN_CACHE</code>","children":[],"payload":{"tag":"li","lines":"18,19"}},{"content":"Statement:<pre data-lines=\"20,23\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> M_SQL_PLAN_CACHE <span class=\"hljs-keyword\">WHERE</span> EXECUTION_COUNT <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">100</span> <span class=\"hljs-keyword\">AND</span> AVG_EXECUTION_TIME <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">1000000</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"19,24"}}],"payload":{"tag":"li","lines":"17,24"}}],"payload":{"tag":"h2","lines":"9,10"}},{"content":"2. Missing or Inadequate Indexes","children":[{"content":"<strong>Description</strong>: Lack of indexes leads to table scans, increasing CPU load","children":[],"payload":{"tag":"li","lines":"25,26"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Create indexes on frequently queried columns","children":[],"payload":{"tag":"li","lines":"27,28"}},{"content":"Evaluate index recommendations","children":[],"payload":{"tag":"li","lines":"28,29"}},{"content":"Avoid over-indexing","children":[],"payload":{"tag":"li","lines":"29,30"}}],"payload":{"tag":"li","lines":"26,30"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; ensure <code>indexserver.ini</code> allows sufficient index memory","children":[],"payload":{"tag":"li","lines":"31,32"}}],"payload":{"tag":"li","lines":"30,32"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TABLE_STATISTICS</code>","children":[],"payload":{"tag":"li","lines":"33,34"}},{"content":"Statement:<pre data-lines=\"35,38\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TABLE_NAME, COLUMN_NAME, SELECTIVITY <span class=\"hljs-keyword\">FROM</span> M_TABLE_STATISTICS <span class=\"hljs-keyword\">WHERE</span> INDEX_COUNT <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"34,39"}}],"payload":{"tag":"li","lines":"32,39"}}],"payload":{"tag":"h2","lines":"24,25"}},{"content":"3. Parameter Sniffing Issues","children":[{"content":"<strong>Description</strong>: Query plans optimized for specific parameters perform poorly with others","children":[],"payload":{"tag":"li","lines":"40,41"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Use query hints (e.g., NO_PARAMETER_SNIFFING)","children":[],"payload":{"tag":"li","lines":"42,43"}},{"content":"Recompile plans for dynamic workloads","children":[],"payload":{"tag":"li","lines":"43,44"}},{"content":"Parameterize queries","children":[],"payload":{"tag":"li","lines":"44,45"}}],"payload":{"tag":"li","lines":"41,45"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; hints are query-level","children":[],"payload":{"tag":"li","lines":"46,47"}}],"payload":{"tag":"li","lines":"45,47"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_EXPENSIVE_STATEMENTS</code>","children":[],"payload":{"tag":"li","lines":"48,49"}},{"content":"Statement:<pre data-lines=\"50,53\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> STATEMENT_STRING, EXECUTION_TIME <span class=\"hljs-keyword\">FROM</span> M_EXPENSIVE_STATEMENTS <span class=\"hljs-keyword\">WHERE</span> OPERATION <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&apos;SELECT&apos;</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"49,54"}}],"payload":{"tag":"li","lines":"47,54"}}],"payload":{"tag":"h2","lines":"39,40"}},{"content":"4. High Concurrency","children":[{"content":"<strong>Description</strong>: Too many concurrent sessions/threads overload CPU","children":[],"payload":{"tag":"li","lines":"55,56"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Limit concurrent connections","children":[],"payload":{"tag":"li","lines":"57,58"}},{"content":"Use connection pooling","children":[],"payload":{"tag":"li","lines":"58,59"}},{"content":"Prioritize critical workloads","children":[],"payload":{"tag":"li","lines":"59,60"}}],"payload":{"tag":"li","lines":"56,60"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>maximum_number_of_sessions</code>: e.g., 100","children":[],"payload":{"tag":"li","lines":"61,62"}},{"content":"Location: <code>global.ini -&gt; [session]</code>","children":[],"payload":{"tag":"li","lines":"62,63"}}],"payload":{"tag":"li","lines":"60,63"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_CONNECTIONS</code>","children":[],"payload":{"tag":"li","lines":"64,65"}},{"content":"Statement:<pre data-lines=\"66,69\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">AS</span> ACTIVE_SESSIONS <span class=\"hljs-keyword\">FROM</span> M_CONNECTIONS <span class=\"hljs-keyword\">WHERE</span> CONNECTION_STATUS <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&apos;RUNNING&apos;</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"65,70"}}],"payload":{"tag":"li","lines":"63,70"}}],"payload":{"tag":"h2","lines":"54,55"}},{"content":"5. Outdated Statistics","children":[{"content":"<strong>Description</strong>: Optimizer uses stale statistics, leading to poor query plans","children":[],"payload":{"tag":"li","lines":"71,72"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Update statistics regularly","children":[],"payload":{"tag":"li","lines":"73,74"}},{"content":"Schedule <code>UPDATE STATISTICS</code> jobs","children":[],"payload":{"tag":"li","lines":"74,75"}}],"payload":{"tag":"li","lines":"72,75"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; use automated statistics updates","children":[],"payload":{"tag":"li","lines":"76,77"}}],"payload":{"tag":"li","lines":"75,77"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TABLE_STATISTICS</code>","children":[],"payload":{"tag":"li","lines":"78,79"}},{"content":"Statement:<pre data-lines=\"80,83\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TABLE_NAME, LAST_STATISTICS_UPDATE <span class=\"hljs-keyword\">FROM</span> M_TABLE_STATISTICS <span class=\"hljs-keyword\">WHERE</span> LAST_STATISTICS_UPDATE <span class=\"hljs-operator\">&lt;</span> NOW() <span class=\"hljs-operator\">-</span> <span class=\"hljs-type\">INTERVAL</span> <span class=\"hljs-string\">&apos;7&apos;</span> <span class=\"hljs-keyword\">DAY</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"79,84"}}],"payload":{"tag":"li","lines":"77,84"}}],"payload":{"tag":"h2","lines":"70,71"}},{"content":"6. Parallelism Overuse","children":[{"content":"<strong>Description</strong>: Excessive parallel execution consumes CPU resources","children":[],"payload":{"tag":"li","lines":"85,86"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Adjust parallelism for queries","children":[],"payload":{"tag":"li","lines":"87,88"}},{"content":"Limit parallel threads per query","children":[],"payload":{"tag":"li","lines":"88,89"}}],"payload":{"tag":"li","lines":"86,89"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>max_parallel_io_per_statement</code>: e.g., 4","children":[],"payload":{"tag":"li","lines":"90,91"}},{"content":"Location: <code>indexserver.ini -&gt; [parallel]</code>","children":[],"payload":{"tag":"li","lines":"91,92"}}],"payload":{"tag":"li","lines":"89,92"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_ACTIVE_STATEMENTS</code>","children":[],"payload":{"tag":"li","lines":"93,94"}},{"content":"Statement:<pre data-lines=\"95,98\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> STATEMENT_STRING, THREAD_COUNT <span class=\"hljs-keyword\">FROM</span> M_ACTIVE_STATEMENTS <span class=\"hljs-keyword\">WHERE</span> THREAD_COUNT <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"94,99"}}],"payload":{"tag":"li","lines":"92,99"}}],"payload":{"tag":"h2","lines":"84,85"}},{"content":"7. Resource Contention","children":[{"content":"<strong>Description</strong>: CPU contention from other processes or system load","children":[],"payload":{"tag":"li","lines":"100,101"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Isolate SAP HANA on dedicated hardware","children":[],"payload":{"tag":"li","lines":"102,103"}},{"content":"Monitor OS-level processes","children":[],"payload":{"tag":"li","lines":"103,104"}},{"content":"Scale up CPU resources","children":[],"payload":{"tag":"li","lines":"104,105"}}],"payload":{"tag":"li","lines":"101,105"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; OS-level tuning may apply","children":[],"payload":{"tag":"li","lines":"106,107"}}],"payload":{"tag":"li","lines":"105,107"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_SYSTEM_OVERVIEW</code>","children":[],"payload":{"tag":"li","lines":"108,109"}},{"content":"Statement:<pre data-lines=\"110,113\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> HOST, CPU_USAGE_PERCENT <span class=\"hljs-keyword\">FROM</span> M_SYSTEM_OVERVIEW;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"109,114"}}],"payload":{"tag":"li","lines":"107,114"}}],"payload":{"tag":"h2","lines":"99,100"}},{"content":"8. Long-Running Transactions","children":[{"content":"<strong>Description</strong>: Prolonged SELECT or DML operations hog CPU","children":[],"payload":{"tag":"li","lines":"115,116"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Terminate or optimize long-running queries","children":[],"payload":{"tag":"li","lines":"117,118"}},{"content":"Set query timeouts","children":[],"payload":{"tag":"li","lines":"118,119"}}],"payload":{"tag":"li","lines":"116,119"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>maximum_statement_execution_time</code>: e.g., 300 seconds","children":[],"payload":{"tag":"li","lines":"120,121"}},{"content":"Location: <code>global.ini -&gt; [execution]</code>","children":[],"payload":{"tag":"li","lines":"121,122"}}],"payload":{"tag":"li","lines":"119,122"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TRANSACTIONS</code>","children":[],"payload":{"tag":"li","lines":"123,124"}},{"content":"Statement:<pre data-lines=\"125,128\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TRANSACTION_ID, START_TIME, DURATION <span class=\"hljs-keyword\">FROM</span> M_TRANSACTIONS <span class=\"hljs-keyword\">WHERE</span> DURATION <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">300</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"124,128"}}],"payload":{"tag":"li","lines":"122,128"}}],"payload":{"tag":"h2","lines":"114,115"}}],"payload":{"tag":"h1","lines":"6,7"}},{"maxWidth":300,"initialExpandLevel":2})</script>

</body>

</html>
