<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.10/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.10/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:x,mm:K}=window,P=new x.Toolbar;P.attach(K);const F=P.render();F.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(F)})})()</script><script>((b,L,T,D)=>{const H=b();window.mm=H.Markmap.create("svg#mindmap",(L||H.deriveOptions)(D),T)})(()=>window.markmap,null,{"content":"CPU Utilization in SAP HANA","children":[{"content":"1. Inefficient Queries","children":[{"content":"<strong>Description</strong>: Poorly written or unoptimized SELECT statements (e.g., full table scans, complex joins)","children":[],"payload":{"tag":"li","lines":"4,5"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Optimize queries (use indexes, rewrite joins, avoid SELECT *)","children":[],"payload":{"tag":"li","lines":"6,7"}},{"content":"Use query hints (e.g., FORCE INDEX)","children":[],"payload":{"tag":"li","lines":"7,8"}},{"content":"Analyze execution plans","children":[],"payload":{"tag":"li","lines":"8,9"}}],"payload":{"tag":"li","lines":"5,9"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None typically required; focus on query tuning","children":[],"payload":{"tag":"li","lines":"10,11"}}],"payload":{"tag":"li","lines":"9,11"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_SQL_PLAN_CACHE</code>","children":[],"payload":{"tag":"li","lines":"12,13"}},{"content":"Statement:<pre data-lines=\"14,17\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> M_SQL_PLAN_CACHE <span class=\"hljs-keyword\">WHERE</span> EXECUTION_COUNT <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">100</span> <span class=\"hljs-keyword\">AND</span> AVG_EXECUTION_TIME <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">1000000</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"13,18"}}],"payload":{"tag":"li","lines":"11,18"}}],"payload":{"tag":"h2","lines":"3,4"}},{"content":"2. Missing or Inadequate Indexes","children":[{"content":"<strong>Description</strong>: Lack of indexes leads to table scans, increasing CPU load","children":[],"payload":{"tag":"li","lines":"19,20"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Create indexes on frequently queried columns","children":[],"payload":{"tag":"li","lines":"21,22"}},{"content":"Evaluate index recommendations","children":[],"payload":{"tag":"li","lines":"22,23"}},{"content":"Avoid over-indexing","children":[],"payload":{"tag":"li","lines":"23,24"}}],"payload":{"tag":"li","lines":"20,24"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; ensure <code>indexserver.ini</code> allows sufficient index memory","children":[],"payload":{"tag":"li","lines":"25,26"}}],"payload":{"tag":"li","lines":"24,26"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TABLE_STATISTICS</code>","children":[],"payload":{"tag":"li","lines":"27,28"}},{"content":"Statement:<pre data-lines=\"29,32\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TABLE_NAME, COLUMN_NAME, SELECTIVITY <span class=\"hljs-keyword\">FROM</span> M_TABLE_STATISTICS <span class=\"hljs-keyword\">WHERE</span> INDEX_COUNT <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"28,33"}}],"payload":{"tag":"li","lines":"26,33"}}],"payload":{"tag":"h2","lines":"18,19"}},{"content":"3. Parameter Sniffing Issues","children":[{"content":"<strong>Description</strong>: Query plans optimized for specific parameters perform poorly with others","children":[],"payload":{"tag":"li","lines":"34,35"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Use query hints (e.g., NO_PARAMETER_SNIFFING)","children":[],"payload":{"tag":"li","lines":"36,37"}},{"content":"Recompile plans for dynamic workloads","children":[],"payload":{"tag":"li","lines":"37,38"}},{"content":"Parameterize queries","children":[],"payload":{"tag":"li","lines":"38,39"}}],"payload":{"tag":"li","lines":"35,39"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; hints are query-level","children":[],"payload":{"tag":"li","lines":"40,41"}}],"payload":{"tag":"li","lines":"39,41"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_EXPENSIVE_STATEMENTS</code>","children":[],"payload":{"tag":"li","lines":"42,43"}},{"content":"Statement:<pre data-lines=\"44,47\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> STATEMENT_STRING, EXECUTION_TIME <span class=\"hljs-keyword\">FROM</span> M_EXPENSIVE_STATEMENTS <span class=\"hljs-keyword\">WHERE</span> OPERATION <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&apos;SELECT&apos;</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"43,48"}}],"payload":{"tag":"li","lines":"41,48"}}],"payload":{"tag":"h2","lines":"33,34"}},{"content":"4. High Concurrency","children":[{"content":"<strong>Description</strong>: Too many concurrent sessions/threads overload CPU","children":[],"payload":{"tag":"li","lines":"49,50"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Limit concurrent connections","children":[],"payload":{"tag":"li","lines":"51,52"}},{"content":"Use connection pooling","children":[],"payload":{"tag":"li","lines":"52,53"}},{"content":"Prioritize critical workloads","children":[],"payload":{"tag":"li","lines":"53,54"}}],"payload":{"tag":"li","lines":"50,54"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>maximum_number_of_sessions</code>: e.g., 100","children":[],"payload":{"tag":"li","lines":"55,56"}},{"content":"Location: <code>global.ini -&gt; [session]</code>","children":[],"payload":{"tag":"li","lines":"56,57"}}],"payload":{"tag":"li","lines":"54,57"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_CONNECTIONS</code>","children":[],"payload":{"tag":"li","lines":"58,59"}},{"content":"Statement:<pre data-lines=\"60,63\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-built_in\">COUNT</span>(<span class=\"hljs-operator\">*</span>) <span class=\"hljs-keyword\">AS</span> ACTIVE_SESSIONS <span class=\"hljs-keyword\">FROM</span> M_CONNECTIONS <span class=\"hljs-keyword\">WHERE</span> CONNECTION_STATUS <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&apos;RUNNING&apos;</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"59,64"}}],"payload":{"tag":"li","lines":"57,64"}}],"payload":{"tag":"h2","lines":"48,49"}},{"content":"5. Outdated Statistics","children":[{"content":"<strong>Description</strong>: Optimizer uses stale statistics, leading to poor query plans","children":[],"payload":{"tag":"li","lines":"65,66"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Update statistics regularly","children":[],"payload":{"tag":"li","lines":"67,68"}},{"content":"Schedule <code>UPDATE STATISTICS</code> jobs","children":[],"payload":{"tag":"li","lines":"68,69"}}],"payload":{"tag":"li","lines":"66,69"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; use automated statistics updates","children":[],"payload":{"tag":"li","lines":"70,71"}}],"payload":{"tag":"li","lines":"69,71"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TABLE_STATISTICS</code>","children":[],"payload":{"tag":"li","lines":"72,73"}},{"content":"Statement:<pre data-lines=\"74,77\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TABLE_NAME, LAST_STATISTICS_UPDATE <span class=\"hljs-keyword\">FROM</span> M_TABLE_STATISTICS <span class=\"hljs-keyword\">WHERE</span> LAST_STATISTICS_UPDATE <span class=\"hljs-operator\">&lt;</span> NOW() <span class=\"hljs-operator\">-</span> <span class=\"hljs-type\">INTERVAL</span> <span class=\"hljs-string\">&apos;7&apos;</span> <span class=\"hljs-keyword\">DAY</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"73,78"}}],"payload":{"tag":"li","lines":"71,78"}}],"payload":{"tag":"h2","lines":"64,65"}},{"content":"6. Parallelism Overuse","children":[{"content":"<strong>Description</strong>: Excessive parallel execution consumes CPU resources","children":[],"payload":{"tag":"li","lines":"79,80"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Adjust parallelism for queries","children":[],"payload":{"tag":"li","lines":"81,82"}},{"content":"Limit parallel threads per query","children":[],"payload":{"tag":"li","lines":"82,83"}}],"payload":{"tag":"li","lines":"80,83"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>max_parallel_io_per_statement</code>: e.g., 4","children":[],"payload":{"tag":"li","lines":"84,85"}},{"content":"Location: <code>indexserver.ini -&gt; [parallel]</code>","children":[],"payload":{"tag":"li","lines":"85,86"}}],"payload":{"tag":"li","lines":"83,86"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_ACTIVE_STATEMENTS</code>","children":[],"payload":{"tag":"li","lines":"87,88"}},{"content":"Statement:<pre data-lines=\"89,92\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> STATEMENT_STRING, THREAD_COUNT <span class=\"hljs-keyword\">FROM</span> M_ACTIVE_STATEMENTS <span class=\"hljs-keyword\">WHERE</span> THREAD_COUNT <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"88,93"}}],"payload":{"tag":"li","lines":"86,93"}}],"payload":{"tag":"h2","lines":"78,79"}},{"content":"7. Resource Contention","children":[{"content":"<strong>Description</strong>: CPU contention from other processes or system load","children":[],"payload":{"tag":"li","lines":"94,95"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Isolate SAP HANA on dedicated hardware","children":[],"payload":{"tag":"li","lines":"96,97"}},{"content":"Monitor OS-level processes","children":[],"payload":{"tag":"li","lines":"97,98"}},{"content":"Scale up CPU resources","children":[],"payload":{"tag":"li","lines":"98,99"}}],"payload":{"tag":"li","lines":"95,99"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"None; OS-level tuning may apply","children":[],"payload":{"tag":"li","lines":"100,101"}}],"payload":{"tag":"li","lines":"99,101"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_SYSTEM_OVERVIEW</code>","children":[],"payload":{"tag":"li","lines":"102,103"}},{"content":"Statement:<pre data-lines=\"104,107\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> HOST, CPU_USAGE_PERCENT <span class=\"hljs-keyword\">FROM</span> M_SYSTEM_OVERVIEW;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"103,108"}}],"payload":{"tag":"li","lines":"101,108"}}],"payload":{"tag":"h2","lines":"93,94"}},{"content":"8. Long-Running Transactions","children":[{"content":"<strong>Description</strong>: Prolonged SELECT or DML operations hog CPU","children":[],"payload":{"tag":"li","lines":"109,110"}},{"content":"<strong>Fix</strong>:","children":[{"content":"Terminate or optimize long-running queries","children":[],"payload":{"tag":"li","lines":"111,112"}},{"content":"Set query timeouts","children":[],"payload":{"tag":"li","lines":"112,113"}}],"payload":{"tag":"li","lines":"110,113"}},{"content":"<strong>Parameter Changes</strong>:","children":[{"content":"<code>maximum_statement_execution_time</code>: e.g., 300 seconds","children":[],"payload":{"tag":"li","lines":"114,115"}},{"content":"Location: <code>global.ini -&gt; [execution]</code>","children":[],"payload":{"tag":"li","lines":"115,116"}}],"payload":{"tag":"li","lines":"113,116"}},{"content":"<strong>SQL/View to Check</strong>:","children":[{"content":"View: <code>M_TRANSACTIONS</code>","children":[],"payload":{"tag":"li","lines":"117,118"}},{"content":"Statement:<pre data-lines=\"119,122\"><code class=\"language-sql\"><span class=\"hljs-keyword\">SELECT</span> TRANSACTION_ID, START_TIME, DURATION <span class=\"hljs-keyword\">FROM</span> M_TRANSACTIONS <span class=\"hljs-keyword\">WHERE</span> DURATION <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">300</span>;\n</code></pre>","children":[],"payload":{"tag":"li","lines":"118,122"}}],"payload":{"tag":"li","lines":"116,122"}}],"payload":{"tag":"h2","lines":"108,109"}}],"payload":{"tag":"h1","lines":"0,1"}},{"maxWidth":300,"initialExpandLevel":2})</script>
</body>
</html>
